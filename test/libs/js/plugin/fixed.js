/*!
* author : ahuing
* date   : 2015-8-7
* name   : jqfixed v1.01
* modify : 2015-8-24 17:09:53
 */
define(function(require,exports,s){return function(s){!function($){function s(s){return this.each(function(){var i=$(this),o=i.data("jqFixed"),t="object"==typeof s&&s;o||(i.data("jqFixed",o=new e(this,t)),o.init())})}var i,e=function(s,i){this.o=$.extend(!0,{},e.defaults,i),this.$self=$(s)};e.defaults={css:{},fixed:0,margintop:0,fade:0,close:".btn-close"},e.prototype={init:function(){var s,i,e,o,t,n,f,c,d;this.$self.length&&(s=this,i=$(window),e=!-[1]&&!window.XMLHttpRequest,o=s.o,t=s.$self.outerHeight(!0),n=0,f={position:e?"absolute":"fixed",marginTop:0,display:"block",zIndex:parseInt((new Date).getTime()/1e3)},o.css.zIndex=o.css.zIndex||s.$self.css("z-index"),o.css.position=o.css.position||s.$self.css("position"),s.$self.css(o.css),c=o.css.marginTop=s.$self.offset().top,"fixed"==o.css.position?(o.css.marginTop=f.marginTop=o.css.bottom>=0?i.height()-t-o.css.bottom:c-i.scrollTop(),o.css.bottom="auto",e&&(o.css.position="absolute")):("absolute"!=o.css.position&&(s.$self.before('<div style="height:'+t+'px"></div>'),o.css.marginTop=-t),o.fixed?f.marginTop=o.fixed>c?o.margintop:c-o.fixed:o.fixed=c),o.css.top=0,o.css.width=o.css.width||s.$self.width(),s.$self.css(o.css),s.$self.find(o.close).click(function(){s.$self.css("display","none"),i.off("scroll.fixed")}),o.fade&&s.$self.on("unfixed",function(){s.$self.one("fixed",function(){s.$self.css("display","none").animate({opacity:"show"})})}),d=function(){var c=i.scrollTop();f.top=e?c:0,s.$self.css(c>=o.fixed&&f||o.css),c>=o.fixed&&s.$self.trigger("fixed",[c,t]).trigger(c>n?"scrollUp":"scrollDown")||s.$self.trigger("unfixed"),setTimeout(function(){n=c},0)},d(),i.on("scroll.fixed",d))}},i=$.fn.jqFixed,$.fn.jqFixed=s,$.fn.jqFixed.Constructor=e,$.fn.jqFixed.noConflict=function(){return $.fn.jqFixed=i,this},$(window).on("load",function(){$(".jqFixed").each(function(){var i=$(this);s.call(i,i.data())})})}(jQuery)}});